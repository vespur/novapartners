<style>
  .global-header {
    width: 100%;
    height: {{property.headerHeight}}px;
    background: {{property.headerBg}};
    {{#if property.isSticky}}
    position: sticky;
    top: 0;
    {{else}}
    position: relative;
    {{/if}}
    z-index: 1000;
  }

  .header-container {
    max-width: 100%;
    height: 100%;
    padding: 0 40px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .logo {
    display: flex;
    align-items: center;
  }

  .logo a {
    display: block;
    line-height: 0;
  }

  {{#if property.logoImage}}
  .logo img {
    width: {{property.logoWidth}}px;
    height: auto;
  }
  {{/if}}

  .nav-desktop {
    display: flex;
    gap: {{property.menuGapDesktop}}px;
    align-items: center;
  }

  .nav-desktop a {
    color: {{property.menuColorDesktop}};
    font-size: {{property.menuSizeDesktop}}px;
    text-decoration: none;
    transition: opacity 0.2s;
  }

  .nav-desktop a:hover {
    opacity: 0.7;
  }

  .hamburger {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
  }

  .hamburger svg {
    width: 24px;
    height: 24px;
    stroke: {{property.menuColorDesktop}};
  }

  .nav-mobile {
    position: fixed;
    top: 0;
    right: -100%;
    width: 280px;
    height: 100vh;
    background: #fff;
    box-shadow: -2px 0 10px rgba(0,0,0,0.1);
    transition: right 0.3s;
    z-index: 2000;
    overflow-y: auto;
  }

  .nav-mobile.active {
    right: 0;
  }

  .mobile-header {
    padding: 20px;
    display: flex;
    justify-content: flex-end;
    border-bottom: 1px solid #eee;
  }

  .close-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
  }

  .close-btn svg {
    width: 24px;
    height: 24px;
    stroke: {{property.menuColorMobile}};
  }

  .mobile-menu {
    padding: 20px;
  }

  .mobile-menu a {
    display: block;
    color: {{property.menuColorMobile}};
    font-size: {{property.menuSizeMobile}}px;
    text-decoration: none;
    padding: 15px 0;
    border-bottom: 1px solid #f5f5f5;
  }

  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
    z-index: 1999;
  }

  .overlay.active {
    opacity: 1;
    visibility: visible;
  }

  @media (max-width: 768px) {
    .header-container {
      padding: 0 20px;
    }

    .nav-desktop {
      display: none;
    }

    .hamburger {
      display: block;
    }
  }
</style>

<template>
  <header class="global-header">
    <div class="header-container">
      <div class="logo">
        {{#if property.logoImage}}
        <a href="{{property.logoLink.value}}">
          <img src="{{property.logoImage}}" alt="Logo" />
        </a>
        {{/if}}
      </div>

      <nav class="nav-desktop">
        {{#each property.menus}}
        <a href="{{link.value}}">{{name}}</a>
        {{/each}}
      </nav>

      <button class="hamburger">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
    </div>
  </header>

  <div class="overlay"></div>

  <div class="nav-mobile">
    <div class="mobile-header">
      <button class="close-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
    <div class="mobile-menu">
      {{#each property.menus}}
      <a href="{{link.value}}">{{name}}</a>
      {{/each}}
    </div>
  </div>
</template>

<script>
  const container = bm.container;
  const navMobile = container.querySelector('.nav-mobile');
  const overlay = container.querySelector('.overlay');

  container.addEventListener('click', (e) => {
    if (e.target.closest('.hamburger')) {
      navMobile.classList.add('active');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    if (e.target.closest('.close-btn') || e.target.matches('.overlay')) {
      navMobile.classList.remove('active');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    if (e.target.matches('.mobile-menu a')) {
      navMobile.classList.remove('active');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }
  }, true);

  bm.onDestroy = () => {
    document.body.style.overflow = '';
  };
</script>

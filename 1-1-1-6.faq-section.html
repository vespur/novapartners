<style>
  .faq-section {
    width: 100%;
    background-color: {{property.backgroundColor}};
    padding: {{property.paddingY}}px {{property.paddingX}}px;
    position: relative;
  }

  .faq-header {
    text-align: center;
    margin-bottom: {{property.paddingY}}px;
    animation: fadeInDown 0.6s ease;
  }

  .faq-title {
    font-family: var(--font-family-heading);
    font-weight: var(--font-weight-heading);
    font-size: {{property.sectionTitleFontSize}}px;
    color: var(--color-text-100);
    margin: 0 0 16px 0;
    line-height: 1.3;
  }

  .faq-description {
    font-family: var(--font-family-body);
    font-weight: var(--font-weight-body);
    font-size: {{property.sectionDescriptionFontSize}}px;
    color: var(--color-text-70);
    margin: 0;
    line-height: 1.6;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .faq-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .faq-items {
    display: flex;
    flex-direction: column;
    gap: {{property.itemGap}}px;
  }

  .faq-item {
    background-color: {{property.itemBackgroundColor}};
    border-radius: 12px;
    border: 1px solid rgba(0, 85, 255, 0.1);
    animation: fadeInUp 0.8s ease;
    overflow: hidden;
  }

  .faq-question {
    padding: {{property.itemPadding}}px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.3s ease;
    user-select: none;
  }

  .faq-question:hover {
    background-color: rgba(0, 85, 255, 0.05);
  }

  .faq-question-text {
    font-family: var(--font-family-body);
    font-weight: 600;
    font-size: {{property.questionFontSize}}px;
    color: var(--color-text-100);
    margin: 0;
    flex: 1;
    line-height: 1.3;
  }

  .faq-toggle {
    font-size: 20px;
    color: var(--color-accent-100);
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 16px;
    line-height: 1;
  }

  .faq-item.active .faq-toggle {
    transform: rotate(180deg);
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .faq-item.active .faq-answer {
    max-height: 500px;
  }

  .faq-answer-text {
    font-family: var(--font-family-body);
    font-weight: var(--font-weight-body);
    font-size: {{property.answerFontSize}}px;
    color: var(--color-text-70);
    margin: 0;
    padding: 0 {{property.itemPadding}}px {{property.itemPadding}}px {{property.itemPadding}}px;
    line-height: 1.8;
  }

  /* 애니메이션 */
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* 모바일 반응형 */
  @media (max-width: 768px) {
    .faq-section {
      padding: {{property.mobilePaddingY}}px {{property.mobilePaddingX}}px;
    }

    .faq-header {
      margin-bottom: {{property.mobilePaddingY}}px;
    }

    .faq-title {
      font-size: {{property.mobileSectionTitleFontSize}}px;
    }

    .faq-description {
      font-size: {{property.mobileSectionDescriptionFontSize}}px;
    }

    .faq-items {
      gap: 12px;
    }

    .faq-question {
      padding: {{property.mobileItemPadding}}px;
    }

    .faq-question-text {
      font-size: {{property.mobileQuestionFontSize}}px;
    }

    .faq-answer-text {
      font-size: {{property.mobileAnswerFontSize}}px;
      padding: 0 {{property.mobileItemPadding}}px {{property.mobileItemPadding}}px {{property.mobileItemPadding}}px;
    }
  }

  /* 성능 최적화 */
  .faq-section {
    transform: translateZ(0);
    backface-visibility: hidden;
  }
</style>

<template>
  <div class="faq-section">
    {{#if property.sectionTitle}}
      <div class="faq-header">
        <h2 class="faq-title">{{property.sectionTitle}}</h2>
        {{#if property.sectionDescription}}
          <p class="faq-description">{{property.sectionDescription}}</p>
        {{/if}}
      </div>
    {{/if}}

    {{#if property.faqs}}
      <div class="faq-container">
        <div class="faq-items">
          {{#each property.faqs}}
            <div class="faq-item" data-faq-index="{{@index}}">
              <div class="faq-question">
                {{#if question}}
                  <p class="faq-question-text">{{question}}</p>
                {{/if}}
                <span class="faq-toggle">▼</span>
              </div>
              {{#if answer}}
                <div class="faq-answer">
                  <p class="faq-answer-text">{{answer}}</p>
                </div>
              {{/if}}
            </div>
          {{/each}}
        </div>
      </div>
    {{/if}}
  </div>
</template>

<script>
  const container = bm.container;
  const context = bm.context;

  function initFAQ() {
    const faqItems = container.querySelectorAll('.faq-item');

    faqItems.forEach((item) => {
      const question = item.querySelector('.faq-question');

      question.addEventListener('click', function() {
        // 다른 항목 닫기 (선택사항 - 한번에 하나만 열기)
        // faqItems.forEach((otherItem) => {
        //   if (otherItem !== item) {
        //     otherItem.classList.remove('active');
        //   }
        // });

        // 현재 항목 토글
        item.classList.toggle('active');
      });
    });
  }

  initFAQ();

  bm.onContextChange = () => {
    initFAQ();
  };
</script>
